/* variables.css */
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap');
@font-face {
  font-family: 'Playfair Display';
  src: url('fonts/Playfair_Display.ttf') format('truetype');
  font-display: swap;
}

html {
  color-scheme: light dark;
  box-sizing: border-box;
}

*, *:before, *:after {
  box-sizing: inherit;
}

/* Define DARK theme as the DEFAULT in :root.
  This means if no 'light' or 'dark' class is present on <html>,
  the theme will automatically be dark.
*/
:root {
  --bg: #1A1A1B;
  --fg: gainsboro;
  --primary: cornflowerblue;
  --secondary: aliceblue;
  --card-bg: #1E1E1E;
  --card-border: #343536;
  --card-shadow-color: #00000052;
  --fg-muted: gray;
  --bg-alt: #ffffff; /* You might want a dark specific --bg-alt-dark */
  --toggle-track: #ccc; /* Or a dark specific color */
  --link-highlight: aliceblue;
  --primary-rgb: 100, 149, 237;
  --secondary-rgb: 240, 248, 255;
  --gold-color: #FFD700; /* Gold color for starred/read highlights */
  --gold-rgb: 255, 215, 0; /* RGB components for gold color */
  --border-radius: 5px;
  --read-item-bg: #282828; /* A slightly darker background for read items */
  --font-scale: 1;
  --feed-gap: 1em;

  /* Define the specific LIGHT theme variables for use by html.light */
  --light-bg: #f5f5f5;
  --light-fg: darkslategrey;
  --light-primary: cornflowerblue;
  --light-secondary: slategrey;
  --light-card-bg: #ffffff;
  --light-card-border: #EEE;
  --light-card-shadow-color: lightgrey;
  --light-toggle-track: #ccc;
  --light-link-highlight: rgba(173, 216, 230, 0.5);
  --light-primary-rgb: 100, 149, 237;
  --light-secondary-rgb: 112, 128, 144;
}

@media (min-width: 768px) {
  :root {
    --feed-gap: 1.5em;
  }
}

@media (min-width: 1024px) {
  :root {
    --feed-gap: 2.5em;
  }
}

/*
  Remove the @media (prefers-color-scheme: light) block from here
  if you want the `<html>` class to fully control the theme and override system preference.
  If you keep it, system preference for light will override the :root dark default *unless* the JS adds the 'dark' class. For a clear default to dark, it's best to remove it here.
*/
/* @media (prefers-color-scheme: light) {
  :root {
    --bg: var(--light-bg);
    --fg: var(--light-fg);
    --primary: var(--light-primary);
    --secondary: var(--light-secondary);
    --card-bg: var(--light-card-bg);
    --card-border: var(--light-card-border);
    --card-shadow-color: var(--light-card-shadow-color);
    --toggle-track: var(--light-toggle-track);
    --link-highlight: var(--light-link-highlight);
  }
} */


/*
  This block defines the LIGHT theme.
  When `html.light` class is applied, it will override the :root (dark) values.
*/
html.light {
  --bg: var(--light-bg);
  --fg: var(--light-fg);
  --primary: var(--light-primary);
  --secondary: var(--light-secondary);
  --primary-rgb: var(--light-primary-rgb);
  --secondary-rgb: var(--light-secondary-rgb);
  --card-bg: var(--light-card-bg);
  --card-border: var(--light-card-border);
  --card-shadow-color: var(--light-card-shadow-color);
  --toggle-track: var(--light-toggle-track);
  --link-highlight: var(--light-link-highlight);
  --read-item-bg: #e0e0e0;

  background-color: var(--bg); /* Explicitly apply for html.light */
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'><defs><filter id='tileableNoise' x='0%' y='0%' width='100%' height='100%'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch' result='noise'/><feColorMatrix in='noise' type='saturate' values='0'/><feComponentTransfer><feFuncA type='linear' slope='0.05'/></feComponentTransfer></filter></defs><rect width='100%' height='100%' /><rect width='100%' height='100%' filter='url(%23tileableNoise)'/></svg>");
  background-repeat: repeat;
  color: var(--fg); /* Explicitly apply for html.light */
}

/*
  This block defines specific dark mode visual properties that aren't just colors.
  Since :root is already dark, we don't need to redefine color variables here.
*/
html.dark {
  background-image: none;
}

html.dark a:visited {
  color: grey;
}

body.no-curves {
  --border-radius: 0 !important;
}

body.no-curves .item,
body.no-curves .modal-content,
body.no-curves button,
body.no-curves .filter-select,
body.no-curves .settings-input,
body.no-curves .settings-textarea,
body.no-curves img.entry-image,
body.no-curves .itemdescription img,
body.no-curves #sync-status-message,
body.no-curves .undo-button,
body.no-curves .search-btn,
body.no-curves .search-container,
body.no-curves kbd,
body.no-curves .switch .slider {
  border-radius: 0 !important;
}

body.no-curves .switch .slider::before {
  border-radius: 0 !important;
}

/* Apply variables to body and html */
body,
html {
  margin: 0;
  padding: 0;
  color: var(--fg);
  word-break: break-word;
  font-size: calc(14px * var(--font-scale));
  background-color: var(--bg);
  background-repeat: repeat;
  /* Allow natural scrolling */
  min-height: 100%;
}

body {
  overscroll-behavior-y: contain; /* Prevents unwanted pull-to-refresh or bounce in some cases */
}

p,
h1,
a {
  color: var(--fg);
}

.itemdescription a {
  color: var(--secondary);
}

a,
h1,
h2,
h3,
h5,
h6 {
  text-shadow: 2px 2px 2px var(--card-shadow-color);
}

title {
  display: none;
}

a {
  text-decoration: none;
  transition: color .3s linear;
}

a:visited {
  color: grey;
}

a:hover {
  color: var(--primary);
}