/* layout.css */
#app-viewport {
  width: 100vw;
  position: relative;
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

body.no-scroll {
  overflow: hidden !important;
  scrollbar-gutter: stable;
}

body.no-scroll #app-viewport {
  overflow-y: hidden !important;
}


#sliding-container {
  display: flex;
  width: calc(200vw + var(--feed-gap));
  gap: var(--feed-gap);
  transition: transform 0.6s cubic-bezier(0.65, 0, 0.35, 1);
  align-items: flex-start; /* Better for performance than stretch on mobile */
}

@media (min-width: 1024px) {
  #sliding-container {
    will-change: transform;
    align-items: stretch;
  }
}

#app-viewport.shifted #sliding-container {
  /* On mobile, shift fully to the help section */
  transform: translateX(calc(-100vw - var(--feed-gap)));
}

@media (min-width: 1024px) {
  #app-viewport.shifted #sliding-container {
    /* On desktop, keep 40% of feed visible and center the help column content */
    transform: translateX(calc(-60vw - var(--feed-gap)));
  }
}

#main-section {
  width: 100vw;
  flex-shrink: 0;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

#shortcuts-section {
  width: 100vw;
  flex-shrink: 0;
  box-sizing: border-box;
  background-color: transparent;
  position: relative;
  display: flex;
  justify-content: flex-start; /* Align card to start of its 100vw column */
  padding-left: 5vw; /* Offset to help centering in the shifted viewport */
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.4s ease-in-out, visibility 0.4s;
}

#app-viewport.shifted #shortcuts-section {
  opacity: 1;
  visibility: visible;
}

@media (min-width: 1024px) {
  #shortcuts-section {
    margin-left: -28rem;
  }
}

.help-panel-item {
    width: 90%;
    max-width: 600px;
    margin: var(--feed-gap) 0 !important; /* Left aligned in its section */
    position: sticky;
    top: 5vh;
    z-index: 100; /* Ensure it's above other items */
    background-color: var(--card-bg); /* Ensure it's opaque */
}

body.no-scroll {
  overflow: hidden !important;
  scrollbar-gutter: stable;
}

#header {
  position: relative;
  z-index: 1000;
  padding: 1rem 0;
  background-color: transparent;
  font-family: 'Playfair Display', serif;
  font-weight: 400;
  text-transform: uppercase;
  color: var(--fg-muted);
  font-size: small;
  font-variant: all-small-caps;
}

#ntn-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  margin: 0 auto;
  box-sizing: border-box;
}

#header h2 {
  padding: 0;
  margin: 0;
  font-size: 1.75rem;
  text-align: left;
}

#header-options {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.search-btn {
  width: 3.5em;
  height: 3.5em;
  background-color: var(--card-bg);
  color: var(--fg);
  border-radius: 100px;
  opacity: 0.8;
  box-shadow: 1px 1px 5px var(--card-shadow-color);
  border: 1px solid var(--card-border);
  cursor: pointer;
  transition: background-color .2s ease, color .2s ease, box-shadow .2s ease, transform .2s ease, opacity .2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-btn:hover,
.search-btn.active {
  background-color: var(--primary);
  color: white;
  opacity: 1;
}

.search-icon {
  width: 1.5rem;
  height: 1.5rem;
}

#search-overlay {
    position: sticky;
    top: 5rem; /* Below header */
    z-index: 900;
    width: 100%;
    display: flex;
    justify-content: center;
    padding: 1rem 0;
    pointer-events: none;
}

.search-container {
    background-color: var(--bg);
    border: 1px solid var(--card-border);
    border-radius: 100px;
    padding: 0.5rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    width: 90%;
    max-width: 600px;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
    pointer-events: all;
}

#search-input {
    background: transparent;
    border: none;
    color: var(--fg);
    font-family: inherit;
    font-size: 1.1rem;
    width: 100%;
    outline: none;
}

.search-close {
    background: transparent;
    border: none;
    color: var(--fg-muted);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s;
}

.search-close:hover {
    color: var(--primary);
}

#items {
  width: 100%;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  overflow-x: hidden;
}

.empty-state {
  display: flex;
  flex-grow: 1;
  justify-content: center;
  align-items: center;
  width: 100%;
  text-align: center;
}

.empty-state p {
  font-family: 'Playfair Display', serif;
  font-size: 2rem;
  opacity: 0.5;
  margin: 0;
}

.itembox {
  margin-top: 2em;
}

.item {
  border: 1px solid var(--card-border);
  background-color: var(--card-bg);
  align-content: center;
  display: block;
  position: relative;
  box-shadow: 0px 4px 15px -5px var(--card-shadow-color);
  max-width: 98%;
  margin: var(--feed-gap) auto;
  float: none;
}

.itemtitle {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: 0.75em 3.5rem 0.2em 1.8em;
  border-bottom: 1px solid var(--card-border);
  font-family: 'Playfair Display', serif;
  font-weight: 400;
  text-transform: capitalize;
  min-height: 130px;
  margin-top: 0;
  position: relative;
}

.itemtitle h1,
.itemtitle h2 {
  flex: 1;
  word-break: break-word;
}

.itemtitle h1 {
  font-size: x-large !important;
}

.itemtitle h2 {
  font-size: large !important;
  text-align: left;
}

.itemtitle h1:hover {
  color: var(--primary);
}

.itemtitle h2:hover {
  color: var(--primary);
}

html.light .itemtitle a {
  color: var(--primary);
}

/* Original Light Theme specific gradient */
html.light:not([class*="theme-"]) .itemtitle {
  background: linear-gradient(360deg, var(--link-highlight) 0%, transparent);
}

html.light .item {
  background-color: var(--card-bg);
  box-shadow: 0px 4px 15px -5px var(--card-shadow-color);
}

.source-url {
  display: none;
}

#loading-screen {
  font-family: 'Playfair Display', serif;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: var(--bg);
  color: var(--fg);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-size: xx-large;
}

ul.feed-list,
.feed-container {
  overflow-x: hidden;
}

.item {
  overflow: visible;
  max-height: 2000px;
  transition: transform .25s ease, max-height .25s ease, padding .25s ease, opacity .25s ease;
}

@media (max-width: 767px) {
  #header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  #ntn-title {
    flex: 1;
    padding: 0 1.2rem;
  }

  #header h2 {
    text-align: left;
    height: auto;
  }
}

#header .switch {
  margin-left: auto;
  margin-right: 1rem;
}

#scroll-to-top {
  bottom: 1em;
  right: 1em;
  width: 4rem;
  height: 4rem;
}

@media (min-width: 768px) {

  body,

  html {

    font-size: calc((15px + .1vw) * var(--font-scale));

  }



  .item {

    max-width: var(--feed-width, 75%);

    margin: var(--feed-gap) auto;

    box-shadow: 1px 1px 50px 1px var(--card-shadow-color) !important;

  }



  #ntn-title {

    max-width: var(--feed-width, 75%);

    justify-content: center;

    position: relative;

  }



  #header h2 {
    text-align: center;
  }

  #header-options {
    position: absolute;
    right: 0;
  }

  .itemtitle h1 {
    font-size: 2rem !important;
  }

  .itemtitle h2 {
    font-size: 1.5rem !important;
    text-align: center;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
  }

  .item {
    max-width: 85%;
    margin: var(--feed-gap) auto;
    float: none;
  }

  .itemtitle {
    font-size: 1.75rem !important;
    padding: 0.75em 3.5rem 0.2em 1.2em;
  }

  .item {
    float: unset;
    margin-left: 20%;
    margin-right: 20%;
    box-shadow: 1px 1px 100px 1px var(--card-shadow-color) !important;
    margin: var(--feed-gap) auto;
  }

  .filter-select {
    font-size: large;
  }

  .header-balancer {
    display: block;
    flex: 1;
  }

  #ntn-title {
    flex: 2;
  }

  #header-options {
    flex: 1;
    justify-content: flex-end;
  }

  #header h2 {
    font-size: 2.5rem;
    text-align: center;
  }

  #header .switch {
    margin-left: auto;
    margin-right: 1rem;
  }
}

@media (min-width: 1024px) {

  body,
  html {
    font-size: calc((16px + .15vw) * var(--font-scale));
  }

  .item {
    max-width: var(--feed-width, 50%);
    margin: var(--feed-gap) auto;
  }

  #ntn-title {
    max-width: var(--feed-width, 50%);
  }

  .itemtitle h1 {
    font-size: 2.5rem !important;
  }

  .itemtitle h2 {
    font-size: 2rem !important;
    text-align: center;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
  }
}

/* Utilities */
.d-flex {
  display: flex !important;
}

.gap-2 {
  gap: 0.5rem !important;
}

.justify-between {
  justify-content: space-between !important;
}

.d-none {
  display: none !important;
}

@media (min-width: 768px) {
  .d-md-flex {
    display: flex !important;
  }
}

/* Support for toggling item shadows */
body.no-shadows {
  --card-shadow-color: transparent !important;
}

body.no-shadows .item,
body.no-shadows img.entry-image,
body.no-shadows .itemdescription img {
  box-shadow: none !important;
}

