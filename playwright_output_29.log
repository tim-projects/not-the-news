
Running 1 test using 1 worker

[Test] Starred first item with GUID: 12d5d8f07d08201ebec75e1759cf575f49119817e1d4fef6b412b9188da7b8cf
[Test] Marked second item as read with GUID: f32d675c53949aa5198405234d494e0f09959999ec941d003a86dbda8c96dcea
[Test] Dialog appeared: confirm - Are you sure you want to reset the application? This will clear all local data, cache, and unregister the service worker.

--- Console Logs ---
[error] Alpine.js app or toggleStar method not found for first entry.
[error] Alpine.js app or toggleRead method not found for second entry.
[log] resetApplicationData called.
[log] User confirmed reset: true
[log] Closing database connection...
[log] [DB] Database connection closed.
[log] Unregistering service workers...
[log] Service Worker unregistered: http://localhost:8085/
[log] Service workers unregistered.
[log] Clearing specific IndexedDB object stores...
--------------------


--- Network Responses ---
[Response] 200 http://localhost:8085/login.html
[Response] 200 http://localhost:8085/assets/modal-BfeI5J6W.css
[Response] 200 http://localhost:8085/registerSW.js
[Response] 200 https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap
[Response] 200 http://localhost:8085/assets/Playfair_Display-DaGQPUCb.ttf
[Response] 200 http://localhost:8085/api/login
[Response] 200 http://localhost:8085/
[Response] 200 http://localhost:8085/assets/main-CzpSFYxm.css
[Response] 200 http://localhost:8085/assets/modal-BfeI5J6W.css
[Response] 200 http://localhost:8085/registerSW.js
[Response] 200 http://localhost:8085/assets/main-8_VIySzg.js
[Response] 200 https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap
[Response] 200 http://localhost:8085/assets/Playfair_Display-DaGQPUCb.ttf
[Response] 200 http://localhost:8085/api/user-state/starred
[Response] 200 http://localhost:8085/api/user-state/read
[Response] 200 http://localhost:8085/api/user-state/lastStateSync
[Response] 200 http://localhost:8085/api/user-state/currentDeckGuids
[Response] 200 http://localhost:8085/api/feed-guids?since=
[Response] 200 http://localhost:8085/api/feed-items
[Response] 200 http://localhost:8085/api/feed-items
[Response] 200 http://localhost:8085/api/user-state
[Response] 200 http://localhost:8085/api/user-state
[Response] 200 http://localhost:8085/api/feed-guids?since=2025-12-21T02:28:07.835Z
------------------------

  âœ˜  1 tests/reset_button.spec.js:7:7 â€º Reset Application Data â€º should call resetApplicationData and handle confirmation (5.4s)


  1) tests/reset_button.spec.js:7:7 â€º Reset Application Data â€º should call resetApplicationData and handle confirmation 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

      125 |     expect(resetCalled).toBe(true);
      126 |     expect(userConfirmed).toBe(true);
    > 127 |     expect(clearingIndexedDB).toBe(true);
          |                               ^
      128 |     expect(backendReset).toBe(true);
      129 |
      130 |     // --- Verify application state after reset ---
        at /home/ntn/git/not-the-news/tests/reset_button.spec.js:127:31

    Error Context: test-results/tests-reset_button-Reset-A-2281f-ata-and-handle-confirmation/error-context.md

    attachment #2: trace (application/zip) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/tests-reset_button-Reset-A-2281f-ata-and-handle-confirmation/trace.zip
    Usage:

        npx playwright show-trace test-results/tests-reset_button-Reset-A-2281f-ata-and-handle-confirmation/trace.zip

    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1 failed
    tests/reset_button.spec.js:7:7 â€º Reset Application Data â€º should call resetApplicationData and handle confirmation 
