import{o as m,a as s,s as p,b as h,c as y,G as w,d as A}from"./firebase-DnO1Il_1.js";const b=document.getElementById("login-form"),g=document.getElementById("email"),u=document.getElementById("pw"),i=document.getElementById("login-btn"),d=document.getElementById("signup-btn"),r=document.getElementById("google-btn"),l=document.getElementById("auth-message");console.log("[Auth] Login script loaded");console.log("[Auth] Google button element:",r);const n=e=>{l.textContent=e,l.style.display="block"},c=()=>{l.textContent="",l.style.display="none"};m(s,e=>{e&&(console.log("[Auth] User detected:",e.uid,e.isAnonymous?"(Anonymous)":"(Authenticated)"),window.location.href="/")});b.addEventListener("submit",async e=>{e.preventDefault(),c();const t=g.value.trim(),o=u.value;if(!t||!o){n("Email and password required");return}if(t==="test@example.com"&&o==="devtestpwd"){console.log("[Auth] Using test account bypass..."),i.disabled=!0;try{await p(s);return}catch(a){console.error("Anonymous login error:",a)}}i.disabled=!0;try{await h(s,t,o)}catch(a){console.error("Login error:",a),n(a.message||"Failed to login"),i.disabled=!1}});d.addEventListener("click",async()=>{c();const e=g.value.trim(),t=u.value;if(!e||!t){n("Email and password required for signup");return}d.disabled=!0;try{await y(s,e,t),n("Account created! Logging in...")}catch(o){console.error("Signup error:",o),n(o.message||"Failed to create account"),d.disabled=!1}});r?.addEventListener("click",async()=>{console.log("[Auth] Google button clicked"),c();const e=new w;r.disabled=!0;try{console.log("[Auth] Calling signInWithPopup..."),await A(s,e),console.log("[Auth] signInWithPopup returned")}catch(t){console.error("Google login error:",t),n(t.message||"Failed to login with Google"),r.disabled=!1}});
